(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();const f=document.getElementById("log");function t(r){f.textContent+=r+`
`}async function c(){try{await liff.init({liffId:"YOUR_LIFF_ID"}),t("LIFF init 完了");const r=await liff.getDecodedIDToken();t("UID: "+r.sub);try{const o=await liff.getProfile();t("profile取得成功（最初から同意してる？）"),t(JSON.stringify(o,null,2))}catch{t("profile取得失敗（まだ profile 同意なし）")}}catch(r){t("LIFF init 失敗: "+r)}}document.getElementById("btn-request").addEventListener("click",async()=>{try{t("追加同意リクエスト開始...");const r=await liff.permission.requestAll();if(t("requestAll 結果："+JSON.stringify(r)),r.permissions?.profile==="granted"){const o=await liff.getProfile();t("profile取得成功！"),t(JSON.stringify(o,null,2))}else t("profile 同意なし or 拒否")}catch(r){t("requestAll エラー："+r)}});c();
